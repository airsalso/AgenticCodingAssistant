<mxfile host="app.diagrams.net" modified="2024-01-01T00:00:00.000Z" agent="5.0" version="22.1.0" type="device">
  <diagram name="CodingAgent Architecture" id="coding-agent-arch">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Header -->
        <mxCell id="header" value="DeepAgentic Code Assistant Architecture" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a5d8ff;strokeColor=#1971c2;fontSize=24;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="50" y="20" width="1200" height="80" as="geometry" />
        </mxCell>

        <!-- User Interface Layer -->
        <mxCell id="ui-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d3f9d8;strokeColor=#2f9e44;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="130" width="1200" height="120" as="geometry" />
        </mxCell>
        <mxCell id="ui-label" value="User Interface Layer" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="140" width="300" height="30" as="geometry" />
        </mxCell>

        <mxCell id="cli" value="CLI&#xa;(run_cli.py)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b2f2bb;strokeColor=#2f9e44;fontSize=14;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="100" y="185" width="200" height="50" as="geometry" />
        </mxCell>

        <mxCell id="langgraph-server" value="LangGraph Server" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b2f2bb;strokeColor=#2f9e44;fontSize=14;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="350" y="185" width="200" height="50" as="geometry" />
        </mxCell>

        <mxCell id="api-interface" value="API Interface" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b2f2bb;strokeColor=#2f9e44;fontSize=14;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="600" y="185" width="200" height="50" as="geometry" />
        </mxCell>

        <!-- Main Agent Layer -->
        <mxCell id="main-agent-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d0ebff;strokeColor=#1971c2;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="280" width="1200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="main-agent-label" value="Main Agent Layer" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="290" width="300" height="30" as="geometry" />
        </mxCell>

        <mxCell id="agent-core" value="&lt;b&gt;DeepAgent Core&lt;/b&gt;&lt;br&gt;&lt;br&gt;• LangGraph-based&lt;br&gt;• System Prompt&lt;br&gt;• Tool Orchestration&lt;br&gt;• State Management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a5d8ff;strokeColor=#1971c2;fontSize=14;align=left;spacingLeft=10;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="100" y="340" width="300" height="120" as="geometry" />
        </mxCell>

        <mxCell id="middleware" value="&lt;b&gt;Middleware Stack&lt;/b&gt;&lt;br&gt;&lt;br&gt;• TodoList&lt;br&gt;• Filesystem&lt;br&gt;• SubAgent&lt;br&gt;• Summarization&lt;br&gt;• Prompt Caching" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a5d8ff;strokeColor=#1971c2;fontSize=14;align=left;spacingLeft=10;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="450" y="340" width="300" height="120" as="geometry" />
        </mxCell>

        <mxCell id="backend" value="&lt;b&gt;Backend Layer&lt;/b&gt;&lt;br&gt;&lt;br&gt;• FilesystemBackend&lt;br&gt;• StateBackend&lt;br&gt;• StoreBackend&lt;br&gt;• CompositeBackend" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a5d8ff;strokeColor=#1971c2;fontSize=14;align=left;spacingLeft=10;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="800" y="340" width="300" height="120" as="geometry" />
        </mxCell>

        <!-- Tools Layer -->
        <mxCell id="tools-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe8cc;strokeColor=#e67700;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="510" width="1200" height="180" as="geometry" />
        </mxCell>
        <mxCell id="tools-label" value="Tools Layer" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="520" width="200" height="30" as="geometry" />
        </mxCell>

        <mxCell id="analysis-tools" value="&lt;b&gt;Analysis Tools&lt;/b&gt;&lt;br&gt;&lt;br&gt;• analyze_impact&lt;br&gt;• analyze_impact_cached&lt;br&gt;• analyze_multiple_files&lt;br&gt;• analyze_project" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd8a8;strokeColor=#e67700;fontSize=13;align=left;spacingLeft=10;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="100" y="565" width="250" height="110" as="geometry" />
        </mxCell>

        <mxCell id="execution-tools" value="&lt;b&gt;Execution Tools&lt;/b&gt;&lt;br&gt;&lt;br&gt;• execute_python_code&lt;br&gt;• run_pytest&lt;br&gt;• search_web" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd8a8;strokeColor=#e67700;fontSize=13;align=left;spacingLeft=10;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="380" y="565" width="220" height="110" as="geometry" />
        </mxCell>

        <mxCell id="fs-tools" value="&lt;b&gt;Filesystem Tools&lt;/b&gt;&lt;br&gt;&lt;br&gt;• ls, read_file&lt;br&gt;• write_file, edit_file&lt;br&gt;• glob, grep&lt;br&gt;• delete_file" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd8a8;strokeColor=#e67700;fontSize=13;align=left;spacingLeft=10;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="630" y="565" width="250" height="110" as="geometry" />
        </mxCell>

        <mxCell id="project-tools" value="&lt;b&gt;Project Tools&lt;/b&gt;&lt;br&gt;&lt;br&gt;• change_project_directory&lt;br&gt;• get_cache_stats" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffd8a8;strokeColor=#e67700;fontSize=13;align=left;spacingLeft=10;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="910" y="565" width="220" height="110" as="geometry" />
        </mxCell>

        <!-- SubAgents Layer -->
        <mxCell id="subagents-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3d9fa;strokeColor=#9c36b5;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="720" width="1200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="subagents-label" value="SubAgents Layer" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="730" width="200" height="30" as="geometry" />
        </mxCell>

        <mxCell id="speed-analyzer" value="&lt;b&gt;Speed Analyzer&lt;/b&gt;&lt;br&gt;&lt;br&gt;AST-based&lt;br&gt;static analysis&lt;br&gt;~5s for 10K lines" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e5dbff;strokeColor=#9c36b5;fontSize=13;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="100" y="775" width="170" height="130" as="geometry" />
        </mxCell>

        <mxCell id="precision-analyzer" value="&lt;b&gt;Precision Analyzer&lt;/b&gt;&lt;br&gt;&lt;br&gt;Pyright LSP&lt;br&gt;Type checking&lt;br&gt;Auto-fallback" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e5dbff;strokeColor=#9c36b5;fontSize=13;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="290" y="775" width="170" height="130" as="geometry" />
        </mxCell>

        <mxCell id="code-refactor" value="&lt;b&gt;Code Refactor&lt;/b&gt;&lt;br&gt;&lt;br&gt;Self-healing&lt;br&gt;Max 3 retries&lt;br&gt;PEP8 compliance" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e5dbff;strokeColor=#9c36b5;fontSize=13;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="480" y="775" width="170" height="130" as="geometry" />
        </mxCell>

        <mxCell id="test-generator" value="&lt;b&gt;Test Generator&lt;/b&gt;&lt;br&gt;&lt;br&gt;Pytest tests&lt;br&gt;AAA pattern&lt;br&gt;Auto validation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e5dbff;strokeColor=#9c36b5;fontSize=13;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="670" y="775" width="170" height="130" as="geometry" />
        </mxCell>

        <mxCell id="doc-sync" value="&lt;b&gt;Doc Sync&lt;/b&gt;&lt;br&gt;&lt;br&gt;Docstrings&lt;br&gt;README&lt;br&gt;API docs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e5dbff;strokeColor=#9c36b5;fontSize=13;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="860" y="775" width="170" height="130" as="geometry" />
        </mxCell>

        <mxCell id="file-summarizer" value="&lt;b&gt;File Summarizer&lt;/b&gt;&lt;br&gt;&lt;br&gt;Large files&lt;br&gt;Key extraction&lt;br&gt;Token saving" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e5dbff;strokeColor=#9c36b5;fontSize=13;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="1050" y="775" width="170" height="130" as="geometry" />
        </mxCell>

        <!-- Performance Optimizations Layer -->
        <mxCell id="optimizations-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffc9c9;strokeColor=#c92a2a;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="950" width="1200" height="150" as="geometry" />
        </mxCell>
        <mxCell id="optimizations-label" value="Performance Optimizations" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="960" width="350" height="30" as="geometry" />
        </mxCell>

        <mxCell id="caching" value="&lt;b&gt;Caching&lt;/b&gt;&lt;br&gt;&lt;br&gt;• File cache (LRU)&lt;br&gt;• Analysis cache&lt;br&gt;• Graph cache" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffa8a8;strokeColor=#c92a2a;fontSize=13;align=left;spacingLeft=10;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="100" y="1005" width="220" height="80" as="geometry" />
        </mxCell>

        <mxCell id="parallel" value="&lt;b&gt;Parallel Processing&lt;/b&gt;&lt;br&gt;&lt;br&gt;• ThreadPoolExecutor&lt;br&gt;• 8 max workers&lt;br&gt;• 3+ files threshold" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffa8a8;strokeColor=#c92a2a;fontSize=13;align=left;spacingLeft=10;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="350" y="1005" width="220" height="80" as="geometry" />
        </mxCell>

        <mxCell id="context" value="&lt;b&gt;Context Control&lt;/b&gt;&lt;br&gt;&lt;br&gt;• File limit (50)&lt;br&gt;• Truncation&lt;br&gt;• Summarization" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffa8a8;strokeColor=#c92a2a;fontSize=13;align=left;spacingLeft=10;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="600" y="1005" width="220" height="80" as="geometry" />
        </mxCell>

        <mxCell id="monitoring" value="&lt;b&gt;Monitoring&lt;/b&gt;&lt;br&gt;&lt;br&gt;• Performance tracking&lt;br&gt;• LangSmith integration&lt;br&gt;• Cache stats" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffa8a8;strokeColor=#c92a2a;fontSize=13;align=left;spacingLeft=10;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="850" y="1005" width="220" height="80" as="geometry" />
        </mxCell>

        <!-- Analysis Flow -->
        <mxCell id="flow-header" value="Analysis Flow (SPEED Mode)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff4e6;strokeColor=#f08c00;fontSize=18;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="1300" y="130" width="400" height="50" as="geometry" />
        </mxCell>

        <mxCell id="flow-1" value="1. User Request&lt;br&gt;analyze_impact(file, function)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe8cc;strokeColor=#f08c00;fontSize=14;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="1300" y="200" width="400" height="60" as="geometry" />
        </mxCell>

        <mxCell id="flow-2" value="2. Cache Check&lt;br&gt;Check file_cache &amp; analysis_cache" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe8cc;strokeColor=#f08c00;fontSize=14;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="1300" y="280" width="400" height="60" as="geometry" />
        </mxCell>

        <mxCell id="flow-3" value="3. AST Parsing&lt;br&gt;Parse Python file to AST" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe8cc;strokeColor=#f08c00;fontSize=14;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="1300" y="360" width="400" height="60" as="geometry" />
        </mxCell>

        <mxCell id="flow-4" value="4. Graph Building&lt;br&gt;Build call graph (callers/callees)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe8cc;strokeColor=#f08c00;fontSize=14;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="1300" y="440" width="400" height="60" as="geometry" />
        </mxCell>

        <mxCell id="flow-5" value="5. Dependency Analysis&lt;br&gt;Find callers (depth ≤ 3) &amp; dependencies" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe8cc;strokeColor=#f08c00;fontSize=14;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="1300" y="520" width="400" height="60" as="geometry" />
        </mxCell>

        <mxCell id="flow-6" value="6. Result Formatting&lt;br&gt;Format with line numbers &amp; context" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe8cc;strokeColor=#f08c00;fontSize=14;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="1300" y="600" width="400" height="60" as="geometry" />
        </mxCell>

        <mxCell id="flow-7" value="7. Cache Store&lt;br&gt;Store result in analysis_cache" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe8cc;strokeColor=#f08c00;fontSize=14;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="1300" y="680" width="400" height="60" as="geometry" />
        </mxCell>

        <mxCell id="flow-8" value="8. Return Result&lt;br&gt;Impact analysis with callers &amp; deps" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe8cc;strokeColor=#f08c00;fontSize=14;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="1300" y="760" width="400" height="60" as="geometry" />
        </mxCell>

        <!-- Arrows for main flow -->
        <mxCell id="arrow-ui-to-agent" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#1e1e1e;" edge="1" parent="1" source="cli" target="agent-core">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow-agent-to-tools" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#1e1e1e;" edge="1" parent="1" source="agent-core" target="analysis-tools">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow-tools-to-subagents" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#1e1e1e;dashed=1;" edge="1" parent="1" source="analysis-tools" target="speed-analyzer">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow-middleware-to-backend" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#1e1e1e;" edge="1" parent="1" source="middleware" target="backend">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Arrows for flow diagram -->
        <mxCell id="flow-arrow-1" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#f08c00;" edge="1" parent="1" source="flow-1" target="flow-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow-arrow-2" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#f08c00;" edge="1" parent="1" source="flow-2" target="flow-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow-arrow-3" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#f08c00;" edge="1" parent="1" source="flow-3" target="flow-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow-arrow-4" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#f08c00;" edge="1" parent="1" source="flow-4" target="flow-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow-arrow-5" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#f08c00;" edge="1" parent="1" source="flow-5" target="flow-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow-arrow-6" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#f08c00;" edge="1" parent="1" source="flow-6" target="flow-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow-arrow-7" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#f08c00;" edge="1" parent="1" source="flow-7" target="flow-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend" value="&lt;b&gt;Legend&lt;/b&gt;&lt;br&gt;&lt;br&gt;Solid arrow: Direct call&lt;br&gt;Dashed arrow: Delegation&lt;br&gt;Color coding:&lt;br&gt;• Green: User Interface&lt;br&gt;• Blue: Core Agent&lt;br&gt;• Orange: Tools&lt;br&gt;• Purple: SubAgents&lt;br&gt;• Red: Optimizations" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;align=left;spacingLeft=10;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="1300" y="850" width="400" height="200" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
